(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5311f076"],{2881:function(e,t,i){"use strict";i.d(t,"e",(function(){return n})),i.d(t,"d",(function(){return a})),i.d(t,"a",(function(){return r})),i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return c})),i.d(t,"f",(function(){return d}));var l=i("b775"),o="/admin/setting.Region/";function n(e){return Object(l["a"])({url:o+"list",method:"get",params:e})}function a(e){return Object(l["a"])({url:o+"info",method:"get",params:e})}function r(e){return Object(l["a"])({url:o+"add",method:"post",data:e})}function s(e){return Object(l["a"])({url:o+"edit",method:"post",data:e})}function c(e){return Object(l["a"])({url:o+"dele",method:"post",data:e})}function d(e){return Object(l["a"])({url:o+"pid",method:"post",data:e})}},"98b1":function(e,t,i){"use strict";function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:260,t=880,i=document.documentElement.clientHeight||document.body.clientHeight;return i?i-e:t-e}i.d(t,"a",(function(){return l}))},a9ab:function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-row",[i("el-col",[i("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"搜索字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[i("el-option",{attrs:{value:"region_name",label:"名称"}}),i("el-option",{attrs:{value:"region_pinyin",label:"拼音"}}),i("el-option",{attrs:{value:"region_jianpin",label:"简拼"}}),i("el-option",{attrs:{value:"region_initials",label:"首字母"}}),i("el-option",{attrs:{value:"region_citycode",label:"区号"}}),i("el-option",{attrs:{value:"region_zipcode",label:"邮编"}}),i("el-option",{attrs:{value:"region_pid",label:"PID"}}),i("el-option",{attrs:{value:e.idkey,label:"ID"}})],1),i("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"搜索内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),i("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[i("el-option",{attrs:{value:"create_time",label:"添加时间"}}),i("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),i("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),i("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:function(t){return e.search()}}},[e._v("查询")]),i("el-button",{staticClass:"filter-item",on:{click:function(t){return e.refresh()}}},[e._v("刷新")])],1)],1),i("el-row",[i("el-col",[i("el-button",{on:{click:function(t){return e.selectOpen("pid")}}},[e._v("上级")]),i("el-button",{on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("")}}},[e._v("添加")])],1)],1),i("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[i("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[i("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[i("el-input",{attrs:{type:"textarea",rows:2,disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"pid"===e.selectType?i("el-form-item",{attrs:{label:"上级",prop:""}},[i("el-cascader",{key:e.selectPidKey,staticStyle:{width:"100%"},attrs:{options:e.regionTree,props:e.regionProps,placeholder:"一级地区",clearable:"",filterable:""},on:{change:e.selectPidChange},model:{value:e.region_pid,callback:function(t){e.region_pid=t},expression:"region_pid"}})],1):e._e(),"dele"===e.selectType?i("el-form-item",{attrs:{label:"",prop:""}},[i("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.selectCancel}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:e.tbKey,ref:"table",attrs:{data:e.data,height:e.height,"row-key":e.idkey,lazy:"",load:e.load},on:{"sort-change":e.sort,"selection-change":e.select}},[i("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),i("el-table-column",{attrs:{prop:"region_name",label:"名称","min-width":"250"}}),i("el-table-column",{attrs:{prop:"region_pinyin",label:"拼音","min-width":"250",sortable:"custom"}}),i("el-table-column",{attrs:{prop:"region_jianpin",label:"简拼","min-width":"120",sortable:"custom"}}),i("el-table-column",{attrs:{prop:"region_initials",label:"首字母","min-width":"90",sortable:"custom"}}),i("el-table-column",{attrs:{prop:"region_citycode",label:"区号","min-width":"80",sortable:"custom"}}),i("el-table-column",{attrs:{prop:"region_zipcode",label:"邮编","min-width":"80",sortable:"custom"}}),i("el-table-column",{attrs:{prop:e.idkey,label:"ID","min-width":"95",sortable:"custom"}}),i("el-table-column",{attrs:{prop:"region_pid",label:"PID","min-width":"95"}}),i("el-table-column",{attrs:{prop:"region_sort",label:"排序","min-width":"80",sortable:"custom"}}),i("el-table-column",{attrs:{label:"操作",width:"130",fixed:"right",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[i("el-button",{attrs:{size:"mini",type:"text",title:"添加下级"},on:{click:function(t){return e.add(l)}}},[e._v("添加")]),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l)}}},[e._v("修改")]),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.dele([l])}}},[e._v("删除")])]}}])})],1),i("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[i("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height-50+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"上级",prop:"region_pid"}},[i("el-cascader",{key:e.pidKey,staticStyle:{width:"100%"},attrs:{options:e.regionTree,props:e.regionProps,placeholder:"一级地区",clearable:"",filterable:""},on:{change:e.pidChange},model:{value:e.model.region_pid,callback:function(t){e.$set(e.model,"region_pid",t)},expression:"model.region_pid"}})],1),i("el-form-item",{attrs:{label:"名称",prop:"region_name"}},[i("el-input",{attrs:{placeholder:"请输入名称eg：北京市",clearable:""},model:{value:e.model.region_name,callback:function(t){e.$set(e.model,"region_name",t)},expression:"model.region_name"}})],1),i("el-form-item",{attrs:{label:"拼音",prop:"region_pinyin"}},[i("el-input",{attrs:{placeholder:"请输入拼音eg：Beijing",clearable:""},model:{value:e.model.region_pinyin,callback:function(t){e.$set(e.model,"region_pinyin",t)},expression:"model.region_pinyin"}})],1),i("el-form-item",{attrs:{label:"简拼",prop:"region_jianpin"}},[i("el-input",{attrs:{placeholder:"请输入简拼eg：BJ",clearable:""},model:{value:e.model.region_jianpin,callback:function(t){e.$set(e.model,"region_jianpin",t)},expression:"model.region_jianpin"}})],1),i("el-form-item",{attrs:{label:"首字母",prop:"region_initials"}},[i("el-input",{attrs:{placeholder:"请输入首字母eg：B",clearable:""},model:{value:e.model.region_initials,callback:function(t){e.$set(e.model,"region_initials",t)},expression:"model.region_initials"}})],1),i("el-form-item",{attrs:{label:"区号",prop:"region_citycode"}},[i("el-input",{attrs:{placeholder:"请输入区号eg：010",clearable:""},model:{value:e.model.region_citycode,callback:function(t){e.$set(e.model,"region_citycode",t)},expression:"model.region_citycode"}})],1),i("el-form-item",{attrs:{label:"邮编",prop:"region_zipcode"}},[i("el-input",{attrs:{placeholder:"请输入邮编eg：1000",clearable:""},model:{value:e.model.region_zipcode,callback:function(t){e.$set(e.model,"region_zipcode",t)},expression:"model.region_zipcode"}})],1),i("el-form-item",{attrs:{label:"经度",prop:"region_longitude"}},[i("el-input",{attrs:{placeholder:"请输入经度eg：116.403263",clearable:""},model:{value:e.model.region_longitude,callback:function(t){e.$set(e.model,"region_longitude",t)},expression:"model.region_longitude"}})],1),i("el-form-item",{attrs:{label:"纬度",prop:"region_latitude"}},[i("el-input",{attrs:{placeholder:"请输入纬度eg：39.915156",clearable:""},model:{value:e.model.region_latitude,callback:function(t){e.$set(e.model,"region_latitude",t)},expression:"model.region_latitude"}})],1),i("el-form-item",{attrs:{label:"排序",prop:"region_sort"}},[i("el-input",{attrs:{type:"number",placeholder:"请输入排序eg：2250",clearable:""},model:{value:e.model.region_sort,callback:function(t){e.$set(e.model,"region_sort",t)},expression:"model.region_sort"}})],1),i("el-form-item",{attrs:{label:"",prop:""}},[i("el-link",{staticStyle:{"margin-right":"10px"},attrs:{type:"info",href:"https://www.ip138.com/post/",target:"_blank"}},[e._v("查询区号邮编")]),i("el-link",{attrs:{type:"info",href:"http://api.map.baidu.com/lbsapi/getpoint/index.html",target:"_blank"}},[e._v("查询经度纬度")])],1),e.model.create_time?i("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model.update_time?i("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[i("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e()],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancel}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)},o=[],n=(i("fd7d"),i("2c45"),i("c917"),i("98b1")),a=i("ed08"),r=i("2881"),s={name:"SettingRegion",components:{},data:function(){return{name:"地区",height:680,loading:!1,idkey:"region_id",tbKey:1,data:[],count:0,query:{search_field:"region_name",date_field:"create_time"},dialog:!1,dialogTitle:"",pidKey:500,model:{region_id:"",region_pid:0,region_name:"",region_pinyin:"",region_jianpin:"",region_initials:"",region_citycode:"",region_zipcode:"",region_longitude:"",region_latitude:"",region_sort:2250},rules:{region_name:[{required:!0,message:"请输入名称",trigger:"blur"}]},regionTree:[],regionProps:{expandTrigger:"click",checkStrictly:!0,value:"region_id",label:"region_name"},selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",region_pid:0,selectPidKey:1e3}},created:function(){this.height=Object(n["a"])()+50,this.list(),this.tree()},methods:{list:function(){var e=this;this.loading=!0,this.data=[],Object(r["e"])(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.loading=!1})).catch((function(){e.loading=!1}))},load:function(e,t,i){console.log(e),console.log(t),console.log(i),Object(r["e"])({region_pid:e[this.idkey]}).then((function(e){i(e.data.list)}))},tree:function(){var e=this;this.regionTree=[],Object(r["e"])({type:"tree"}).then((function(t){e.regionTree=t.data})).catch((function(){}))},add:function(e){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset(),e&&(this.model.region_pid=e[this.idkey])},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey],this.reset();var i={};i[this.idkey]=e[this.idkey],Object(r["d"])(i).then((function(e){t.model=e.data}))},cancel:function(){this.dialog=!1},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?Object(r["c"])(e.model).then((function(t){e.list(),e.reset(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):Object(r["a"])(e.model).then((function(t){e.list(),e.reset(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){++this.tbKey,++this.pidKey,++this.selectPidKey,this.tree(),this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&this.$refs["ref"].resetFields(),void 0!==this.$refs["table"]&&this.$refs["table"].doLayout()},search:function(){this.query.page=1,this.list()},refresh:function(){this.query=this.$options.data().query,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(a["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","pid"===e?this.selectTitle="修改上级":"dele"===e&&(this.selectTitle="删除"+this.name),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"pid"===e?this.setpid(this.selection):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},setpid:function(e){var t=this;Object(r["f"])({ids:this.selectGetIds(e),region_pid:this.region_pid}).then((function(e){t.list(),t.reset(),t.selectDialog=!1,t.$message.success(e.msg)})).catch((function(){t.list()}))},dele:function(e){var t=this;e.length?(this.loading=!0,Object(r["b"])({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.reset(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},pidChange:function(e){e&&(this.model.region_pid=e[e.length-1])},selectPidChange:function(e){e&&(this.region_pid=e[e.length-1])}}},c=s,d=i("cba8"),u=Object(d["a"])(c,l,o,!1,null,null,null);t["default"]=u.exports},ed08:function(e,t,i){"use strict";i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return o}));i("abd8"),i("ad3f"),i("5de7"),i("c917"),i("c12c"),i("2c45"),i("b0a9"),i("2ee7"),i("ad9c"),i("941b");function l(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,t="",i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",l=0;l<e;l++)t+=i[Math.floor(Math.random()*i.length)];return t}function o(e,t){for(var i=[],l=e.length,o=0;o<l;o++)i.push(e[o][t]);return i}}}]);