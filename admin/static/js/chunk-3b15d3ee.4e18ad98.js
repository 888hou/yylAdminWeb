(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b15d3ee"],{"0532":function(e,t,i){"use strict";i.d(t,"f",(function(){return n})),i.d(t,"e",(function(){return a})),i.d(t,"a",(function(){return s})),i.d(t,"d",(function(){return r})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return u}));var l=i("b775"),o="/admin/file.Group/";function n(e){return Object(l["a"])({url:o+"list",method:"get",params:e})}function a(e){return Object(l["a"])({url:o+"info",method:"get",params:e})}function s(e){return Object(l["a"])({url:o+"add",method:"post",data:e})}function r(e){return Object(l["a"])({url:o+"edit",method:"post",data:e})}function c(e){return Object(l["a"])({url:o+"dele",method:"post",data:e})}function u(e){return Object(l["a"])({url:o+"disable",method:"post",data:e})}},"09f4":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),Math.easeInOutQuad=function(e,t,i,l){return e/=l/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function n(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function a(e,t,i){var a=n(),s=e-a,r=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=r;var n=Math.easeInOutQuad(c,a,s,t);o(n),c<t?l(e):i&&"function"===typeof i&&i()};u()}},"2d67":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-row",[i("el-col",[i("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"搜索字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[i("el-option",{attrs:{value:"name",label:"名称"}}),i("el-option",{attrs:{value:"is_top",label:"是否置顶"}}),i("el-option",{attrs:{value:"is_hot",label:"是否热门"}}),i("el-option",{attrs:{value:"is_rec",label:"是否推荐"}}),i("el-option",{attrs:{value:"is_hide",label:"是否隐藏"}}),i("el-option",{attrs:{value:e.idkey,label:"ID"}})],1),i("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"搜索内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),i("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[i("el-option",{attrs:{value:"create_time",label:"添加时间"}}),i("el-option",{attrs:{value:"update_time",label:"修改时间"}}),1===e.recycle?i("el-option",{attrs:{value:"delete_time",label:"删除时间"}}):e._e()],1),i("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),i("el-cascader",{staticClass:"filter-item ya-width-150",attrs:{options:e.categoryData,props:e.categoryProps,placeholder:"分类",clearable:"",filterable:""},on:{change:e.categoryChangeQuery},model:{value:e.query.category_id,callback:function(t){e.$set(e.query,"category_id",t)},expression:"query.category_id"}}),i("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:function(t){return e.search()}}},[e._v("查询")]),i("el-button",{staticClass:"filter-item",on:{click:function(t){return e.refresh()}}},[e._v("刷新")])],1)],1),i("el-row",[i("el-col",[i("el-button",{attrs:{title:"修改分类"},on:{click:function(t){return e.selectOpen("cate")}}},[e._v("分类")]),i("el-button",{attrs:{title:"是否置顶"},on:{click:function(t){return e.selectOpen("top")}}},[e._v("置顶")]),i("el-button",{attrs:{title:"是否热门"},on:{click:function(t){return e.selectOpen("hot")}}},[e._v("热门")]),i("el-button",{attrs:{title:"是否推荐"},on:{click:function(t){return e.selectOpen("rec")}}},[e._v("推荐")]),i("el-button",{attrs:{title:"是否隐藏"},on:{click:function(t){return e.selectOpen("hide")}}},[e._v("隐藏")]),i("el-button",{on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),1===e.recycle?i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.selectOpen("reco")}}},[e._v("恢复")]):i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),i("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[i("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[i("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"cate"===e.selectType?i("el-form-item",{attrs:{label:"分类",prop:""}},[i("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.categoryData,props:e.categoryProps,clearable:"",filterable:""},on:{change:e.categoryChangeSelect},model:{value:e.category_id,callback:function(t){e.category_id=t},expression:"category_id"}})],1):"top"===e.selectType?i("el-form-item",{attrs:{label:"是否置顶",prop:""}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_top,callback:function(t){e.is_top=t},expression:"is_top"}})],1):"hot"===e.selectType?i("el-form-item",{attrs:{label:"是否热门",prop:""}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_hot,callback:function(t){e.is_hot=t},expression:"is_hot"}})],1):"rec"===e.selectType?i("el-form-item",{attrs:{label:"是否推荐",prop:""}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_rec,callback:function(t){e.is_rec=t},expression:"is_rec"}})],1):"hide"===e.selectType?i("el-form-item",{attrs:{label:"是否隐藏",prop:""}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_hide,callback:function(t){e.is_hide=t},expression:"is_hide"}})],1):"dele"===e.selectType?i("el-form-item",{attrs:{label:"",prop:""}},[1===e.recycle?i("span",{staticStyle:{color:"red"}},[e._v("确定要彻底删除选中的"+e._s(e.name)+"吗？删除后不可恢复！")]):i("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.selectCancel}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select}},[i("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),i("el-table-column",{attrs:{prop:e.idkey,label:"ID","min-width":"100",sortable:"custom"}}),i("el-table-column",{attrs:{prop:"img_url",label:"图片","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.img_url?i("el-image",{staticClass:"ya-img-table",attrs:{src:t.row.img_url,"preview-src-list":[t.row.img_url],title:"点击查看大图"}}):e._e()]}}])}),i("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"230","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"category_name",label:"分类","min-width":"100","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"hits",label:"点击","min-width":"80",sortable:"custom"}}),i("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"80",sortable:"custom"}}),i("el-table-column",{attrs:{prop:"is_top",label:"置顶","min-width":"80",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(i){return e.istop([t.row])}},model:{value:t.row.is_top,callback:function(i){e.$set(t.row,"is_top",i)},expression:"scope.row.is_top"}})]}}])}),i("el-table-column",{attrs:{prop:"is_hot",label:"热门","min-width":"80",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(i){return e.ishot([t.row])}},model:{value:t.row.is_hot,callback:function(i){e.$set(t.row,"is_hot",i)},expression:"scope.row.is_hot"}})]}}])}),i("el-table-column",{attrs:{prop:"is_rec",label:"推荐","min-width":"80",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(i){return e.isrec([t.row])}},model:{value:t.row.is_rec,callback:function(i){e.$set(t.row,"is_rec",i)},expression:"scope.row.is_rec"}})]}}])}),i("el-table-column",{attrs:{prop:"is_hide",label:"隐藏","min-width":"80",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(i){return e.ishide([t.row])}},model:{value:t.row.is_hide,callback:function(i){e.$set(t.row,"is_hide",i)},expression:"scope.row.is_hide"}})]}}])}),1===e.recycle?i("el-table-column",{attrs:{prop:"delete_time",label:"删除时间","min-width":"155",sortable:"custom"}}):i("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155",sortable:"custom"}}),i("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155",sortable:"custom"}}),i("el-table-column",{attrs:{label:"操作","min-width":"120",align:"right",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[1===e.recycle?i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("reco",l)}}},[e._v("恢复")]):e._e(),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l)}}},[e._v("修改")]),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l)}}},[e._v("删除")])]}}])})],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count > 0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),i("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[i("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"分类",prop:"category_id"}},[i("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.categoryData,props:e.categoryProps,clearable:"",filterable:""},on:{change:e.categoryChange},model:{value:e.model.category_id,callback:function(t){e.$set(e.model,"category_id",t)},expression:"model.category_id"}})],1),i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入名称",clearable:""},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"title",clearable:""},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),i("el-form-item",{attrs:{label:"关键词",prop:"keywords"}},[i("el-input",{attrs:{placeholder:"keywords",clearable:""},model:{value:e.model.keywords,callback:function(t){e.$set(e.model,"keywords",t)},expression:"model.keywords"}})],1),i("el-form-item",{attrs:{label:"描述",prop:"description"}},[i("el-input",{attrs:{type:"textarea",placeholder:"description",clearable:""},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1),i("el-form-item",{attrs:{label:"链接",prop:"url"}},[i("el-input",{attrs:{placeholder:"url",clearable:""},model:{value:e.model.url,callback:function(t){e.$set(e.model,"url",t)},expression:"model.url"}})],1),i("el-form-item",{attrs:{label:"图片",prop:"imgs"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("image","上传图片")}}},[e._v("上传图片")])],1),i("el-col",{attrs:{span:16}},[i("div",[e._v("每张图片大小不超过 1 MB。")])])],1),i("el-row",e._l(e.model.imgs,(function(t,l){return i("el-col",{key:l,staticClass:"ya-file",attrs:{span:6}},[i("el-image",{staticClass:"ya-img-form",attrs:{src:t.file_url,"preview-src-list":[t.file_url],fit:"contain",title:"点击查看大图"}}),i("div",[i("span",{staticClass:"ya-file-name",attrs:{title:t.file_name+"."+t.file_ext}},[e._v(" "+e._s(t.file_name)+"."+e._s(t.file_ext)+" ")]),i("el-link",{staticClass:"ya-file-link",attrs:{href:t.file_url,underline:!1,download:t.file_url,target:"_blank"}},[e._v(" 下载 ")]),i("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileImgDele(l)}}},[e._v("删除")])],1)],1)})),1)],1),i("el-form-item",{attrs:{label:"视频",prop:"videos"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("video","上传视频")}}},[e._v("上传视频")])],1),i("el-col",{attrs:{span:16}},[i("div",[e._v("每个视频大小不超过 50 MB。")])])],1),i("el-row",e._l(e.model.videos,(function(t,l){return i("el-col",{key:l,staticClass:"ya-file",attrs:{span:6}},[i("div",{style:{width:"100%",height:(e.height-.1*e.height)/3-(e.height-.1*e.height)/3*.5+"px"}},[i("video",{attrs:{width:"100%",height:"100%",controls:""}},[i("source",{attrs:{src:t.file_url,type:"video/mp4"}}),i("object",{attrs:{data:t.file_url,width:"100%",height:"100%"}},[i("embed",{attrs:{src:t.file_url,width:"100%",height:"100%"}})])])]),i("div",[i("span",{staticClass:"ya-file-name",attrs:{title:t.file_name+"."+t.file_ext}},[e._v(" "+e._s(t.file_name)+"."+e._s(t.file_ext)+" ")]),i("el-link",{staticClass:"ya-file-link",attrs:{href:t.file_url,underline:!1,download:t.file_url,target:"_blank"}},[e._v(" 下载 ")]),i("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileVideoDele(l)}}},[e._v("删除")])],1)])})),1)],1),i("el-form-item",{attrs:{label:"附件",prop:"files"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("word","上传附件")}}},[e._v("上传附件")])],1),i("el-col",{attrs:{span:16}},[i("div",[e._v("每个附件大小不超过 10 MB。")])])],1),e._l(e.model.files,(function(t,l){return i("el-row",{key:l},[i("el-col",{staticClass:"ya-file-name",attrs:{span:18}},["image"===t.file_type?i("i",{staticClass:"el-icon-picture"}):"audio"===t.file_type?i("i",{staticClass:"el-icon-headset"}):"video"===t.file_type?i("i",{staticClass:"el-icon-video-play"}):"word"===t.file_type?i("i",{staticClass:"el-icon-document"}):i("i",{staticClass:"el-icon-folder"}),i("span",{attrs:{title:t.file_name+"."+t.file_ext}},[e._v(" "+e._s(t.file_name)+"."+e._s(t.file_ext)+" ")])]),i("el-col",{attrs:{span:6}},[i("el-link",{staticClass:"ya-file-link",attrs:{href:t.file_url,underline:!1,download:t.file_url,target:"_blank"}},[e._v(" 下载 ")]),i("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileFileDele(l)}}},[e._v("删除")])],1)],1)}))],2),i("el-form-item",{attrs:{label:"排序",prop:"sort"}},[i("el-input",{attrs:{type:"number",placeholder:"sort",clearable:""},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),i("el-form-item",{attrs:{label:"内容",prop:"content"}},[i("rich-editor",{model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})],1),e.model[e.idkey]?i("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[i("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model.update_time?i("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[i("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?i("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[i("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancel}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),i("el-dialog",{attrs:{title:e.fileTitle,visible:e.fileDialog,width:"80%",top:"1vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[i("file-manage",{attrs:{"file-type":e.fileType},on:{fileCancel:e.fileCancel,fileSubmit:e.fileSubmit}})],1)],1)},o=[],n=(i("b0c0"),i("d3b7"),i("25f0"),i("a434"),i("98b1")),a=i("333d"),s=i("3659"),r=i("6a13"),c=i("ed08"),u=i("b775"),d="/admin/cms.Content/";function f(e){return Object(u["a"])({url:d+"category",method:"get",params:e})}function h(e){return Object(u["a"])({url:d+"list",method:"get",params:e})}function m(e){return Object(u["a"])({url:d+"info",method:"get",params:e})}function p(e){return Object(u["a"])({url:d+"add",method:"post",data:e})}function g(e){return Object(u["a"])({url:d+"edit",method:"post",data:e})}function b(e){return Object(u["a"])({url:d+"dele",method:"post",data:e})}function v(e){return Object(u["a"])({url:d+"cate",method:"post",data:e})}function y(e){return Object(u["a"])({url:d+"istop",method:"post",data:e})}function _(e){return Object(u["a"])({url:d+"ishot",method:"post",data:e})}function w(e){return Object(u["a"])({url:d+"isrec",method:"post",data:e})}function k(e){return Object(u["a"])({url:d+"ishide",method:"post",data:e})}function O(e){return Object(u["a"])({url:d+"recover",method:"get",params:e})}function x(e){return Object(u["a"])({url:d+"recoverReco",method:"post",data:e})}function j(e){return Object(u["a"])({url:d+"recoverDele",method:"post",data:e})}var C={name:"CmsContent",components:{Pagination:a["a"],FileManage:s["a"],RichEditor:r["a"]},directives:{},data:function(){return{name:"内容",recycle:0,height:680,loading:!1,idkey:"content_id",query:{page:1,limit:12,search_field:"name",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{content_id:"",category_id:"",name:"",title:"",keywords:"",description:"",url:"",imgs:[],files:[],videos:[],content:"",sort:250},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},categoryData:[],categoryProps:{checkStrictly:!0,value:"category_id",label:"category_name"},selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",category_id:0,is_top:0,is_hot:0,is_rec:0,is_hide:0,fileDialog:!1,fileTitle:"文件管理",fileType:"image"}},created:function(){this.recycle=this.$route.meta.query.recycle,this.height=Object(n["a"])(),this.list(),this.category()},methods:{list:function(){var e=this;this.loading=!0,1===this.recycle?O(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.loading=!1})).catch((function(){e.loading=!1})):h(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var i={};i[this.idkey]=e[this.idkey],m(i).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.model[e.idkey]?g(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){})):p(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){})))}))},reset:function(e){e?(this.model=e,0===this.model.category_id&&(this.model.category_id="")):this.model=this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.query.page=1,this.list()},refresh:function(){this.query=this.$options.data().query,this.list(),this.category()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(c["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","cate"===e?this.selectTitle="修改分类":"top"===e?this.selectTitle="是否置顶":"hot"===e?this.selectTitle="是否热门":"rec"===e?this.selectTitle="是否推荐":"hide"===e?this.selectTitle="是否隐藏":"dele"===e?this.selectTitle="删除"+this.name:"reco"===e&&(this.selectTitle="恢复"+this.name),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"cate"===e?this.editcate(this.selection):"top"===e?this.istop(this.selection,!0):"hot"===e?this.ishot(this.selection,!0):"rec"===e?this.isrec(this.selection,!0):"hide"===e?this.ishide(this.selection,!0):"dele"===e?this.dele(this.selection):"reco"===e&&this.reco(this.selection),this.selectDialog=!1}else this.selectAlert()},editcate:function(e){var t=this;v({ids:this.selectGetIds(e),category_id:this.category_id}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))},istop:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var l=e[0].is_top;i&&(l=this.is_top),y({ids:this.selectGetIds(e),is_top:l}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list(),t.loading=!1}))}else this.selectAlert()},ishot:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var l=e[0].is_hot;i&&(l=this.is_hot),_({ids:this.selectGetIds(e),is_hot:l}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list(),t.loading=!1}))}else this.selectAlert()},isrec:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var l=e[0].is_rec;i&&(l=this.is_rec),w({ids:this.selectGetIds(e),is_rec:l}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list(),t.loading=!1}))}else this.selectAlert()},ishide:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var l=e[0].is_hide;i&&(l=this.is_hide),k({ids:this.selectGetIds(e),is_hide:l}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list(),t.loading=!1}))}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,1===e.recycle?j({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1})):b({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},reco:function(e){var t=this;e.length?x({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1})):this.selectAlert()},category:function(){var e=this;f().then((function(t){e.categoryData=t.data.list})).catch((function(){}))},categoryChange:function(e){e&&(this.model.category_id=e[e.length-1])},categoryChangeQuery:function(e){e&&(this.query.category_id=e[e.length-1])},categoryChangeSelect:function(e){e&&(this.category_id=e[e.length-1])},fileUpload:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"文件管理";this.fileType=e,this.fileTitle=t,this.fileDialog=!0},fileCancel:function(){this.fileDialog=!1},fileSubmit:function(e,t){this.fileDialog=!1,this.fileTitle="";var i=e.length;if(i)for(var l=0;l<i;l++)"image"===t?this.model.imgs.push(e[l]):"video"===t?this.model.videos.push(e[l]):this.model.files.push(e[l])},fileImgDele:function(e){this.model.imgs.splice(e,1)},fileVideoDele:function(e){this.model.videos.splice(e,1)},fileFileDele:function(e){this.model.files.splice(e,1)}}},T=C,$=(i("3270"),i("2877")),D=Object($["a"])(T,l,o,!1,null,"42725486",null);t["default"]=D.exports},3270:function(e,t,i){"use strict";i("539a")},4381:function(e,t,i){"use strict";i("caad"),i("2532");var l=i("4360");function o(e,t){var i=t.value,o=l["a"].getters&&l["a"].getters.roles;if(!(i&&i instanceof Array))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");if(i.length>0){var n=i,a=o.some((function(e){return n.includes(e)}));a||e.parentNode&&e.parentNode.removeChild(e)}}var n={inserted:function(e,t){o(e,t)},update:function(e,t){o(e,t)}},a=function(e){e.directive("permission",n)};window.Vue&&(window["permission"]=n,Vue.use(a)),n.install=a;t["a"]=n},"539a":function(e,t,i){},"6a13":function(e,t,i){"use strict";var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{attrs:{id:e.editorId}}),i("el-dialog",{attrs:{visible:e.fileDialog,title:e.fileTitle,width:"80%",top:"1vh","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[i("file-manage",{attrs:{"file-type":e.fileType},on:{fileCancel:e.fileCancel,fileSubmit:e.fileSubmit}})],1)],1)},o=[],n=i("d4ec"),a=i("bee2"),s=i("262e"),r=i("2caf"),c=(i("a9e3"),i("99af"),i("6fad")),u=i.n(c),d=i("ed08"),f=i("3659"),h={name:"RichEditor",components:{FileManage:f["a"]},directives:{},model:{prop:"content",event:"change"},props:{id:{type:String,default:"wangeditor"+Object(d["b"])()},content:{type:String,default:""},excludeMenus:{type:Array,default:function(){return["image","video"]}},zIndex:{type:Number,default:1e4},height:{type:Number,default:500},focus:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{name:"富文本编辑器",editor:null,editorId:this.id,editorContent:this.content,editorContentNew:"",fileDialog:!1,fileTitle:"文件管理",fileType:"image"}},watch:{content:function(e){e!==this.editor.txt.html()&&this.editor.txt.html(this.content)}},created:function(){},mounted:function(){this.editorCreate()},destroyed:function(){this.editorDestroy()},methods:{editorCreate:function(){var e=this,t=this,i=u.a.BtnMenu,l=function(e){Object(s["a"])(l,e);var i=Object(r["a"])(l);function l(e){Object(n["a"])(this,l);var t=u.a.$('<div class="w-e-menu" data-title="上传图片"><el-button>图片</el-button></div>');return i.call(this,t,e)}return Object(a["a"])(l,[{key:"clickHandler",value:function(){t.fileType="image",t.fileTitle="上传图片",t.fileDialog=!0}},{key:"tryChangeActive",value:function(){}}]),l}(i),o=function(e){Object(s["a"])(l,e);var i=Object(r["a"])(l);function l(e){Object(n["a"])(this,l);var t=u.a.$('<div class="w-e-menu" data-title="上传视频"><el-button>视频</el-button></div>');return i.call(this,t,e)}return Object(a["a"])(l,[{key:"clickHandler",value:function(){t.fileType="video",t.fileTitle="上传视频",t.fileDialog=!0}},{key:"tryChangeActive",value:function(){}}]),l}(i),c=function(e){Object(s["a"])(l,e);var i=Object(r["a"])(l);function l(e){Object(n["a"])(this,l);var t=u.a.$('<div class="w-e-menu" data-title="上传附件"><el-button>附件</el-button></div>');return i.call(this,t,e)}return Object(a["a"])(l,[{key:"clickHandler",value:function(){t.fileType="word",t.fileTitle="上传附件",t.fileDialog=!0}},{key:"tryChangeActive",value:function(){}}]),l}(i),d=function(e){Object(s["a"])(l,e);var i=Object(r["a"])(l);function l(e){Object(n["a"])(this,l);var t=u.a.$('<div class="w-e-menu" data-title="清空内容"><el-button>清空</el-button></div>');return i.call(this,t,e)}return Object(a["a"])(l,[{key:"clickHandler",value:function(){t.editor.txt.clear()}},{key:"tryChangeActive",value:function(){}}]),l}(i);t.editor=new u.a("#"+t.editorId),t.editor.config.excludeMenus=t.excludeMenus,t.editor.menus.extend("upimgKey",l),t.editor.config.menus=t.editor.config.menus.concat("upimgKey"),t.editor.menus.extend("upvideoKey",o),t.editor.config.menus=t.editor.config.menus.concat("upvideoKey"),t.editor.menus.extend("upfileKey",c),t.editor.config.menus=t.editor.config.menus.concat("upfileKey"),t.editor.menus.extend("clearKey",d),t.editor.config.menus=t.editor.config.menus.concat("clearKey"),t.editor.config.zIndex=t.zIndex,t.editor.config.height=t.height,t.editor.config.focus=t.focus,t.editor.config.placeholder=t.placeholder,t.editor.config.onchange=function(i){t.editorContentNew=i,e.$emit("change",t.editorContentNew)},t.editor.create(),t.editor.txt.clear(),t.editor.txt.html(t.editorContent)},editorDestroy:function(){this.editor&&(this.editor.destroy(),this.editor=null)},fileCancel:function(){this.fileDialog=!1},fileSubmit:function(e,t){this.fileDialog=!1,this.fileTitle="";var i=e.length;if(i)for(var l=0;l<i;l++)"image"===t?this.editor.cmd.do("insertHTML",'<img file-id="'.concat(e[l]["file_id"],'" src="').concat(e[l]["file_url"],'" style="max-width:50%;"/>')):"video"===t?this.editor.cmd.do("insertHTML",'<video width="50%" height="50%" controls>\n                <source file-id="'.concat(e[l]["file_id"],'" src="').concat(e[l]["file_url"],'" type="video/mp4">\n                <object file-id="').concat(e[l]["file_id"],'" data="').concat(e[l]["file_url"],'" width="50%" height="50%">\n                  <embed file-id="').concat(e[l]["file_id"],'" src="').concat(e[l]["file_url"],'" width="50%" height="50%">\n                </object>\n              </video>')):this.editor.cmd.do("insertHTML",'<a file-id="'.concat(e[l]["file_id"],'" href="').concat(e[l]["file_url"],'" download="').concat(e[l]["file_url"],'" target="_blank">').concat(e[l]["file_name"],"</el-link>"))}}},m=h,p=i("2877"),g=Object(p["a"])(m,l,o,!1,null,"21f5bccd",null);t["a"]=g.exports},"98b1":function(e,t,i){"use strict";function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:260,t=880,i=document.documentElement.clientHeight||document.body.clientHeight;return i?i-e:t-e}i.d(t,"a",(function(){return l}))},e08b:function(e,t,i){"use strict";i.d(t,"h",(function(){return n})),i.d(t,"j",(function(){return a})),i.d(t,"i",(function(){return s})),i.d(t,"a",(function(){return r})),i.d(t,"d",(function(){return c})),i.d(t,"b",(function(){return u})),i.d(t,"f",(function(){return d})),i.d(t,"g",(function(){return f})),i.d(t,"e",(function(){return h})),i.d(t,"c",(function(){return m})),i.d(t,"k",(function(){return p})),i.d(t,"m",(function(){return g})),i.d(t,"l",(function(){return b}));var l=i("b775"),o="/admin/file.File/";function n(e){return Object(l["a"])({url:o+"group",method:"get",params:e})}function a(e){return Object(l["a"])({url:o+"list",method:"get",params:e})}function s(e){return Object(l["a"])({url:o+"info",method:"get",params:e})}function r(){return o+"add"}function c(e){return Object(l["a"])({url:o+"edit",method:"post",data:e})}function u(e){return Object(l["a"])({url:o+"dele",method:"post",data:e})}function d(e){return Object(l["a"])({url:o+"editgroup",method:"post",data:e})}function f(e){return Object(l["a"])({url:o+"edittype",method:"post",data:e})}function h(e){return Object(l["a"])({url:o+"editdomain",method:"post",data:e})}function m(e){return Object(l["a"])({url:o+"disable",method:"post",data:e})}function p(e){return Object(l["a"])({url:o+"recover",method:"get",params:e})}function g(e){return Object(l["a"])({url:o+"recoverReco",method:"post",data:e})}function b(e){return Object(l["a"])({url:o+"recoverDele",method:"post",data:e})}},ed08:function(e,t,i){"use strict";i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return o}));i("ac1f"),i("466d"),i("4d63"),i("25f0"),i("5319"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d");function l(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,t="",i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",l=0;l<e;l++)t+=i[Math.floor(Math.random()*i.length)];return t}function o(e,t){for(var i=[],l=e.length,o=0;o<l;o++)i.push(e[o][t]);return i}},f71e:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var l=i("2b0e"),o=i("b311"),n=i.n(o);function a(){l["default"].prototype.$message({message:"复制成功",type:"success",duration:1500})}function s(){l["default"].prototype.$message({message:"复制失败",type:"error"})}function r(e,t){var i=new n.a(t.target,{text:function(){return e}});i.on("success",(function(){a(),i.destroy()})),i.on("error",(function(){s(),i.destroy()})),i.onClick(t)}}}]);