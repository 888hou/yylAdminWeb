(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23c1acdf"],{"35b0":function(t,e,a){"use strict";a.r(e);var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-container",style:{backgroundImage:"url("+t.login_bg_url+")"}},[a("el-form",{ref:"ref",staticClass:"login-form",attrs:{model:t.model,rules:t.rules,"label-position":"left"}},[a("div",{staticClass:"login-title"},[a("h3",{staticClass:"login-title-name"},[t._v(t._s(t.system_name))])]),a("div",{staticClass:"login-logo"},[t.logo_url?a("el-image",{staticClass:"login-logo-img",attrs:{src:t.logo_url,fit:"contain"}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})]):a("div",{staticStyle:{height:"134px"}})],1),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{type:"text",placeholder:"账号/手机/邮箱","prefix-icon":"el-icon-user",autocomplete:"on",clearable:""},model:{value:t.model.username,callback:function(e){t.$set(t.model,"username",e)},expression:"model.username"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码","prefix-icon":"el-icon-lock",autocomplete:"on",clearable:"","show-password":""},model:{value:t.model.password,callback:function(e){t.$set(t.model,"password",e)},expression:"model.password"}})],1),t.captcha_switch?a("el-form-item",{attrs:{prop:"captcha_code"}},[a("el-col",{attrs:{span:13}},[a("el-input",{attrs:{placeholder:"请输入验证码","prefix-icon":"el-icon-picture",autocomplete:"off",clearable:""},model:{value:t.model.captcha_code,callback:function(e){t.$set(t.model,"captcha_code",e)},expression:"model.captcha_code"}})],1),a("el-col",{attrs:{span:11}},[a("el-image",{staticClass:"login-captcha",attrs:{src:t.captcha_src,fit:"fill",alt:"验证码",title:"点击刷新验证码"},on:{click:t.captcha}})],1)],1):t._e(),a("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin.apply(null,arguments)}}},[t._v("登录")])],1)],1)},o=[],i=(a("a256"),a("2dd8"),a("e208")),s=a("d369"),r={name:"AdminLogin",components:{},data:function(){return{name:"登录",system_name:"",loading:!1,redirect:void 0,otherQuery:{},captcha_switch:0,captcha_src:"",logo_url:"",login_bg_url:"",model:{username:"",password:"",captcha_id:"",captcha_code:""},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],captcha_code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},watch:{$route:{handler:function(t){var e=t.query;e&&(this.redirect=e.redirect,this.otherQuery=this.getOtherQuery(e))},immediate:!0}},created:function(){this.setting()},mounted:function(){},destroyed:function(){},methods:{captcha:function(){var t=this;Object(i["a"])().then((function(e){t.captchaSet(e)}))},captchaSet:function(t){this.model.captcha_id="",this.model.captcha_code="",t.data.captcha_switch&&(this.captcha_src=t.data.captcha_src,this.model.captcha_id=t.data.captcha_id),this.captcha_switch=t.data.captcha_switch},setting:function(){var t=this;this.model.captcha_id="",this.model.captcha_code="",Object(i["d"])().then((function(e){t.captchaSet(e),t.login_bg_url=e.data.login_bg_url,t.system_name=e.data.system_name,t.logo_url=e.data.logo_url,t.$store.dispatch("settings/changeSetting",{key:"systemName",value:e.data.system_name}),t.$store.dispatch("settings/changeSetting",{key:"pageTitle",value:e.data.page_title}),t.$store.dispatch("settings/changeSetting",{key:"logoUrl",value:e.data.logo_url}),t.$store.dispatch("settings/changeSetting",{key:"faviconUrl",value:e.data.favicon_url})}))},handleLogin:function(){var t=this;this.$refs["ref"].validate((function(e){if(!e)return!1;t.loading=!0,t.$store.dispatch("user/login",t.model).then((function(){Object(s["a"])(),t.$router.push({path:t.redirect||"/",query:t.otherQuery}).catch((function(){t.loading=!1}))})).catch((function(){t.loading=!1}))}))},getOtherQuery:function(t){return Object.keys(t).reduce((function(e,a){return"redirect"!==a&&(e[a]=t[a]),e}),{})}}},l=r,n=(a("9b4f"),a("cba8")),d=Object(n["a"])(l,c,o,!1,null,"1e89ce8b",null);e["default"]=d.exports},"9b4f":function(t,e,a){"use strict";a("e10e")},e10e:function(t,e,a){}}]);